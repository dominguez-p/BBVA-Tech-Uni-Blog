<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/google-map/google-map.html">

<link rel="import" href="app-data.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="edit-camping.html">
<link rel="import" href="delete-camping.html">
<link rel="import" href="all-campings.html">


<dom-module id="show-camping">
  <template>
    <!-- Bootstrap css added here in order to works in all browsers -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <style include="shared-styles">
      :host {
        display: block;

        padding: 10px;
      }
      .thumbnail img {
          width: 100%;
      }

      .thumbnail {
          padding: 0;
      }

      .thumbnail .caption-full {
          padding: 9px;
      }

      .edit-delete-form {
          display: inline;
      }
      a {
          color: white;
      }
      .breakAll {
        word-break: break-all;
      }
      google-map {
        height: 250px;
        border: 1px solid black;
      }
    </style>
    <app-data key="camping" data="{{camping}}"></app-data>

    <app-data key="userData" data="{{storedUser}}"></app-data>

    <app-data key="grants" data="{{canView}}"></app-data>

    <a href="/all-campings">Volver</a>
    <h1>[[camping.name]]</h1>
    <div class="container">
      <div class="row">
          <div class="col-md-3">
              <p class="lead">YelpCamp</p>
              <div class="list-group">
                  <li class="list-group-item active">Info 1</li>
                  <li class="list-group-item">Info 2</li>
                  <li class="list-group-item">Info 3</li>
              </div>
          </div>
          <div class="col-md-9">
              <div class="thumbnail">
                  <img class="image-responsive" src="[[camping.image]]">
                  <div class="caption-full">
                      <h4 class="pull-right">â‚¬[[camping.price]]/night</h4>
                      <h4><a href="[[camping.url]]" target="_blank">[[camping.name]]</a></h4>

                        <p class="breakAll">[[camping.description]]</p>

                      <!-- //si tiene permiso -->
                      <!-- <a class="btn btn-xs btn-warning" href="#">Edit</a> -->
                      <!-- <form class="delete-form" action="/campgrounds/<%= campground._id %>?_method=DELETE" method="POST"> -->
                      <!-- <button class="btn btn-xs btn-danger">Delete</button> -->
                        <div class="edit-delete-form">
                            <div hidden$="[[!canView]]">
                                <!-- <p>puede ver</p> -->
                                  <edit-camping hidden$="[[!storedUser.loggedin]]"></edit-camping>
                                  <delete-camping hidden$="[[!storedUser.loggedin]]" ></delete-camping>
                            </div>
                            <p hidden$="[[canView]]"><em> info: you must be the author of the post to edit or delete this post</em></p>
                        </div>
                        <hr>
                        <div class="map">
                          <google-map zoom="7" latitude=[[camping.latitude]] longitude=[[camping.longitude]] api-key="AIzaSyA582M4QmSOb08dn1qhexA9lr6a39FBJOY" fit-to-marker>
                            <google-map-marker latitude=[[camping.latitude]] longitude=[[camping.longitude]] title="[[camping.name]]" draggable="true"></google-map-marker>
                          </google-map>
                        </div>
                      <!-- </form> -->
                      <!-- //si tiene permiso -->
                      <p>
                          <em>Submitted by: [[camping.author]]</em>
                      </p>
                      <p><em>date: [[camping.date]]</em></p>
                      <div class="text-right">
                          <a class="btn btn-success" href="/new-comment">Add new comment</a>
                      </div>
                  </div>
                  <div>
                      <all-comments></all-comments>
                  </div>
              </div>
          </div>
      </div>
    </div>
    <a href="/all-campings">Volver</a>
  </template>

  <script>
    /**
     * `show-camping`
     * Detail of camping, description, price, etc
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class ShowCamping extends Polymer.Element {
      static get is() { return 'show-camping'; }
      static get properties() {
        return {
          prop1: {
            type: String,
            value: 'show-camping'
          },
          camping: Object
        };
      }
    }

    window.customElements.define(ShowCamping.is, ShowCamping);
  </script>
</dom-module>
